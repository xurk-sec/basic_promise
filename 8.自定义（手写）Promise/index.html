<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <script src="promise.js"></script>
</head>
<body>
  <script>
    // 在异步里面不能抛错误，捕获不到。即便是内置的也捕获不到。
    let p = new Promise((resolve, reject) => {
      setTimeout(() => {
        // resolve('ok');
        reject('err');
      }, 1000)
      // resolve('OK');
      // reject('error');
      // 抛出异常 改变状态
      // throw '出错啦';
    })

    console.log("p: ", p);
    console.log(Promise.reject('ok'));

    // 值传递：第一个回调函数then参数为空。（需要写对应的自动加上参数内容的函数）
    const res = p.then(value => {
      console.log(value);
      // console.log('111');
      // return 521;
      // return 'Hello';
      // return new Promise((resolve, reject) => {
      //   // resolve('success');
      //   // reject('error');
        // throw '出错了';
      // })
      // throw 'err';
    }, reason => {
      console.warn(reason);
      // return 'error';
      // return new Promise((resolve, reject) => {
        // resolve('hello promise');
        // reject('err');
      //   throw 'wrong';
      // })
    }).then(value => {
      console.log('222');
    }).then(value => {
      console.log('333');
    }).catch(reason =>{
      console.warn(reason);
    })

    // setTimeout(() => {
    console.log("res: ", res);

    // }, 1000)

    // p.then(value => {
    //   console.log(value);
    // }, reason => {
    //   console.warn(reason);
    // })

    // let err = p.catch(reason => {
    //   console.warn(reasons);
    // })
  </script>
</body>
</html>